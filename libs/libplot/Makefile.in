# This is the Makefile for libplot, a library of plotting routines
# that generate GNU plot(5) output.

VERSION = @VERSION@

top_srcdir = @top_srcdir@
srcdir = @srcdir@
VPATH  = @srcdir@

SHELL = /bin/sh

CC = @CC@
CFLAGS = @CFLAGS@
INSTALL = @INSTALL@
INSTALL_DATA = @INSTALL_DATA@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
LDFLAGS = @LDFLAGS@
RANLIB = @RANLIB@

prefix = @prefix@
exec_prefix = @exec_prefix@
bindir = @bindir@
infodir = @infodir@
libdir = @libdir@
oldincludedir = @oldincludedir@
includedir = @includedir@

######################################################################

LSRC = affine.c alabel.c arc.c arcrel.c box.c boxrel.c capmod.c circle.c circlerel.c \
closepl.c color.c colorname.c concat.c cont.c contrel.c dot.c ellarc.c ellarcrel.c ellipse.c \
endpoly.c erase.c fill.c fillcolor.c flushpl.c fontname.c fontsize.c \
joinmod.c label.c line.c linerel.c linemod.c linewidth.c marker.c markerrel.c \
move.c moverel.c openpl.c outfile.c pencolor.c point.c pointrel.c putshort.c \
restorestate.c savestate.c space.c textangle.c xmalloc.c xstring.c

LOBJ = affine.o alabel.o arc.o arcrel.o box.o boxrel.o capmod.o circle.o circlerel.o \
closepl.o color.o colorname.o concat.o cont.o contrel.o dot.o ellarc.o ellarcrel.o ellipse.o \
endpoly.o erase.o fill.o fillcolor.o flushpl.o fontname.o fontsize.o \
joinmod.o label.o line.o linerel.o linemod.o linewidth.o marker.o markerrel.o \
move.o moverel.o openpl.o outfile.o pencolor.o point.o pointrel.o putshort.o \
restorestate.o savestate.o space.o textangle.o xmalloc.o xstring.o

LINKABLES = color.c colorname.c colorname.h outfile.c xstring.c xmalloc.c

INCLUDES=-I$(srcdir) -I../.. -I$(top_srcdir)/include 

all: libplot.a

.PHONY: all install uninstall clean realclean distclean links remove-links

.SUFFIXES:
.SUFFIXES: .c .o

links-present: links

links:
	-if test ! -f links-present; then \
	for i in $(LINKABLES); do @LN_S@ $(srcdir)/../common/$$i $$i; done; \
	touch links-present; fi

remove-links:
	-if test -f links-present; then \
	rm -f $(LINKABLES); rm -f links-present; fi

.c.o:
	$(CC) -DVERSION=\"$(VERSION)\" $(CFLAGS) $(INCLUDES) -c $<

libplot.a: links-present $(LOBJ)
	ar cru libplot.a $(LOBJ)
	$(RANLIB) libplot.a

install: libplot.a
	$(top_srcdir)/mkdirs.sh $(libdir)
	$(INSTALL_DATA) libplot.a $(libdir)/libplot.a
	$(RANLIB) $(libdir)/libplot.a

uninstall:
	-rm -f $(libdir)/libplot.a

clean: remove-links
	-rm -f *.o libplot.a core

distclean: clean
	-rm -f \#* *~ TAGS Makefile

realclean: distclean

TAGS: links-present $(LSRC) $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h $(srcdir)/extern.h
	cd $(srcdir) && etags $(LSRC) ../../include/sys-defines.h ../../include/plot.h extern.h

######################################################################
# dependencies generated by gcc -c -MM *.c -I etc.
######################################################################

affine.o: affine.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
alabel.o: alabel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
arc.o: arc.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
arcrel.o: arcrel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
box.o: box.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
boxrel.o: boxrel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
capmod.o: capmod.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
circle.o: circle.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
circlerel.o: circlerel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
closepl.o: closepl.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
color.o: color.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
colorname.o: colorname.c $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h extern.h colorname.h
concat.o: concat.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
cont.o: cont.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
contrel.o: contrel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
dot.o: dot.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
ellarc.o: ellarc.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
ellarcrel.o: ellarcrel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
ellipse.o: ellipse.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
endpoly.o: endpoly.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
erase.o: erase.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
fill.o: fill.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
fillcolor.o: fillcolor.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
flushpl.o: flushpl.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
fontname.o: fontname.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
fontsize.o: fontsize.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
joinmod.o: joinmod.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
label.o: label.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
line.o: line.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
linemod.o: linemod.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
linerel.o: linerel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
linewidth.o: linewidth.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
marker.o: marker.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
markerrel.o: markerrel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
move.o: move.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
moverel.o: moverel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
openpl.o: openpl.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
outfile.o: outfile.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
pencolor.o: pencolor.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
point.o: point.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
pointrel.o: pointrel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
putshort.o: putshort.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
restorestate.o: restorestate.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
savestate.o: savestate.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
space.o: space.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
textangle.o: textangle.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
xmalloc.o: xmalloc.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
xstring.o: xstring.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h

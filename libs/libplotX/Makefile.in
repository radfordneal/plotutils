# This is the Makefile for libplotX, a library of plotting routines
# that generate output in an X window.

VERSION = @VERSION@

top_srcdir = @top_srcdir@
srcdir = @srcdir@
VPATH  = @srcdir@

SHELL = /bin/sh

CC = @CC@
CFLAGS = @CFLAGS@
X_CFLAGS = @X_CFLAGS@
INSTALL = @INSTALL@
INSTALL_DATA = @INSTALL_DATA@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
LDFLAGS = @LDFLAGS@
X_LIBS = @X_LIBS@
X_PRE_LIBS = @X_PRE_LIBS@
XLIBS = @XLIBS@
X_EXTRA_LIBS = @X_EXTRA_LIBS@
LIBS = @LIBS@
RANLIB = @RANLIB@
USE_MOTIF = @USE_MOTIF@

prefix = @prefix@
exec_prefix = @exec_prefix@
bindir = @bindir@
infodir = @infodir@
libdir = @libdir@
includedir = @includedir@
oldincludedir = @oldincludedir@

######################################################################

LSRC = affine.c alabel.c alabel_X.c alabel_str.c arc.c arcrel.c box.c boxrel.c \
capmod.c circle.c circlerel.c closepl.c color.c colordb.c colorname.c concat.c cont.c contrel.c \
controlify.c dot.c ellarc.c ellipse.c endpoly.c erase.c fakearc.c fill.c \
fillcolor.c flushpl.c fontdb.c fontname.c fontsize.c her_glyphs.c intfont.c iso.c \
joinmod.c label.c line.c linemod.c linerel.c linewidth.c marker.c markerrel.c \
matrix.c move.c moverel.c openpl.c outfile.c pencolor.c point.c pointrel.c \
restorestate.c savestate.c retrieve.c space.c textangle.c vector.c \
xevents.c xmalloc.c xstring.c

LOBJ = affine.o alabel.o alabel_X.o alabel_str.o arc.o arcrel.o box.o boxrel.o \
capmod.o circle.o circlerel.o closepl.o color.o colordb.o colorname.o concat.o cont.o contrel.o \
controlify.o dot.o ellarc.o ellipse.o endpoly.o erase.o fakearc.o fill.o \
fillcolor.o flushpl.o fontdb.o fontname.o fontsize.o her_glyphs.o intfont.o iso.o \
joinmod.o label.o line.o linemod.o linerel.o linewidth.o marker.o markerrel.o \
matrix.o move.o moverel.o openpl.o outfile.o pencolor.o point.o pointrel.o \
restorestate.o savestate.o retrieve.o space.o textangle.o vector.o \
xevents.o xmalloc.o xstring.o

LINKABLES = affine.c alabel.c alabel_str.c arcrel.c boxrel.c circle.c circlerel.c color.c colorname.c colorname.h\
cont.c contrel.c control.h controlify.c dot.c fakearc.c fakearc.h fontdb.c \
her_glyphs.c her_metrics.h intfont.c iso.c jis.h label.c labelwidth.c line.c linerel.c \
marker.c markerrel.c matrix.c move.c moverel.c pointrel.c space.c vector.c \
xmalloc.c xstring.c 

INCLUDES=-I$(srcdir) -I../.. -I$(top_srcdir)/include 

all: libplotX.a

.PHONY: all install uninstall clean realclean distclean links remove-links

.SUFFIXES:
.SUFFIXES: .c .o

links-present: links

links:
	-if test ! -f links-present; then \
	for i in $(LINKABLES); do @LN_S@ $(srcdir)/../common/$$i $$i; done; \
	touch links-present; fi

remove-links:
	-if test -f links-present; then \
	rm -f $(LINKABLES); rm -f links-present; fi

.c.o:
	$(CC) -DVERSION=\"$(VERSION)\" -DUSE_MOTIF=$(USE_MOTIF) $(CFLAGS) $(X_CFLAGS) $(INCLUDES) -c $<

libplotX.a: links-present $(LOBJ)
	ar cru libplotX.a $(LOBJ)
	$(RANLIB) libplotX.a

install: libplotX.a
	$(top_srcdir)/mkdirs.sh $(libdir)
	$(INSTALL_DATA) libplotX.a $(libdir)/libplotX.a
	$(RANLIB) $(libdir)/libplotX.a

uninstall:
	-rm -f $(libdir)/libplotX.a

clean: remove-links
	-rm -f *.o libplotX.a core

distclean: clean
	-rm -f \#* *~ TAGS Makefile

realclean: distclean

TAGS: links-present $(LSRC) $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h $(srcdir)/extern.h
	cd $(srcdir) && etags $(LSRC) ../../include/sys-defines.h ../../include/plot.h extern.h

######################################################################
# dependencies generated by gcc -c -MM *.c -I etc.
######################################################################

affine.o: affine.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
alabel.o: alabel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
alabel_X.o: alabel_X.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
alabel_str.o: alabel_str.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h her_metrics.h
arc.o: arc.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
arcrel.o: arcrel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
box.o: box.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
boxrel.o: boxrel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
capmod.o: capmod.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
circle.o: circle.c $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h extern.h
circlerel.o: circlerel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
closepl.o: closepl.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
color.o: color.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
colordb.o: colordb.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
colorname.o: colorname.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h colorname.h
concat.o: concat.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
cont.o: cont.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
contrel.o: contrel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
controlify.o: controlify.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h control.h jis.h
dot.o: dot.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
ellarc.o: ellarc.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
ellipse.o: ellipse.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
endpoly.o: endpoly.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
erase.o: erase.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
fakearc.o: fakearc.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h fakearc.h
fill.o: fill.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
fillcolor.o: fillcolor.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
flushpl.o: flushpl.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
fontdb.o: fontdb.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
fontname.o: fontname.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
fontsize.o: fontsize.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
her_glyphs.o: her_glyphs.c
intfont.o: intfont.c $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h extern.h
iso.o: iso.c $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h extern.h
joinmod.o: joinmod.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
label.o: label.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
labelwidth.o: labelwidth.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
line.o: line.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
linemod.o: linemod.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
linerel.o: linerel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
linewidth.o: linewidth.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
marker.o: marker.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
markerrel.o: markerrel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
matrix.o: matrix.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
move.o: move.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
moverel.o: moverel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
openpl.o: openpl.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
outfile.o: outfile.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
pencolor.o: pencolor.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
point.o: point.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
pointrel.o: pointrel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
restorestate.o: restorestate.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
retrieve.o: retrieve.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
savestate.o: savestate.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h defaultstate.h
space.o: space.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
textangle.o: textangle.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
vector.o: vector.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
xevents.o: xevents.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
xmalloc.o: xmalloc.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
xstring.o: xstring.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h

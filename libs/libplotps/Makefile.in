# This is the Makefile for libplotps, a library of plotting routines
# that generate Postscript output.

VERSION = @VERSION@

top_srcdir = @top_srcdir@
srcdir = @srcdir@
VPATH  = @srcdir@

SHELL = /bin/sh

CC = @CC@
CFLAGS = @CFLAGS@
INSTALL = @INSTALL@
INSTALL_DATA = @INSTALL_DATA@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
LDFLAGS = @LDFLAGS@
RANLIB = @RANLIB@

prefix = @prefix@
exec_prefix = @exec_prefix@
bindir = @bindir@
infodir = @infodir@
libdir = @libdir@
includedir = @includedir@
oldincludedir = @oldincludedir@

######################################################################

LSRC = affine.c alabel.c alabel_ps.c alabel_str.c arc.c arcrel.c box.c boxrel.c \
capmod.c circle.c circlerel.c closepl.c color.c colordb.c colordb2.c colorname.c concat.c cont.c \
contrel.c controlify.c dot.c ellarc.c ellipse.c endpoly.c erase.c fakearc.c \
fill.c fillcolor.c flushpl.c fontdb.c fontname.c fontsize.c header.c \
her_glyphs.c intfont.c iso.c joinmod.c label.c labelwidth.c line.c linerel.c \
linemod.c linewidth.c marker.c matrix.c markerrel.c move.c moverel.c \
openpl.c outbuf.c outfile.c pencolor.c point.c pointrel.c range.c restorestate.c \
savestate.c space.c textangle.c vector.c xmalloc.c xstring.c

LOBJ = affine.o alabel.o alabel_ps.o alabel_str.o arc.o arcrel.o box.o boxrel.o \
capmod.o circle.o circlerel.o closepl.o color.o colordb.o colordb2.o colorname.o concat.o cont.o \
contrel.o controlify.o dot.o ellarc.o ellipse.o endpoly.o erase.o fakearc.o \
fill.o fillcolor.o flushpl.o fontdb.o fontname.o fontsize.o header.o \
her_glyphs.o intfont.o iso.o joinmod.o label.o labelwidth.o line.o linerel.o \
linemod.o linewidth.o marker.o matrix.o markerrel.o move.o moverel.o \
openpl.o outbuf.o outfile.o pencolor.o point.o pointrel.o range.o restorestate.o \
savestate.o space.o textangle.o vector.o xmalloc.o xstring.o

LINKABLES = affine.c alabel.c alabel_str.c arc.c arcrel.c box.c boxrel.c capmod.c \
circle.c circlerel.c color.c colorname.c colorname.h concat.c cont.c contrel.c control.h controlify.c dot.c ellarc.c \
fakearc.c fakearc.h flushpl.c fontdb.c fontsize.c her_glyphs.c her_metrics.h \
intfont.c iso.c jis.h joinmod.c label.c labelwidth.c line.c linerel.c linewidth.c marker.c \
markerrel.c matrix.c move.c moverel.c outbuf.c outfile.c pointrel.c \
restorestate.c savestate.c space.c textangle.c vector.c xmalloc.c xstring.c

INCLUDES=-I$(srcdir) -I../.. -I$(top_srcdir)/include 

all: libplotps.a

.PHONY: all install uninstall clean realclean distclean links remove-links

.SUFFIXES:
.SUFFIXES: .c .o

links-present: links

links:
	-if test ! -f links-present; then \
	for i in $(LINKABLES); do @LN_S@ $(srcdir)/../common/$$i $$i; done; \
	touch links-present; fi

remove-links:
	-if test -f links-present; then \
	rm -f $(LINKABLES); rm -f links-present; fi

.c.o:
	$(CC) -DVERSION=\"$(VERSION)\" $(CFLAGS) $(INCLUDES) -c $<

libplotps.a: links-present $(LOBJ)
	ar cru libplotps.a $(LOBJ)
	$(RANLIB) libplotps.a

install: libplotps.a
	$(top_srcdir)/mkdirs.sh $(libdir)
	$(INSTALL_DATA) libplotps.a $(libdir)/libplotps.a
	$(RANLIB) $(libdir)/libplotps.a

uninstall:
	-rm -f $(libdir)/libplotps.a

clean: remove-links
	-rm -f *.o libplotps.a core

distclean: clean
	-rm -f \#* *~ TAGS Makefile

realclean: distclean

TAGS: links-present $(LSRC) $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h $(srcdir)/extern.h
	cd $(srcdir) && etags $(LSRC) ../../include/sys-defines.h ../../include/plot.h extern.h

######################################################################
# dependencies generated by gcc -c -MM *.c -I etc.
######################################################################

affine.o: alabel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
alabel.o: alabel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
alabel_ps.o: alabel_ps.c $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h extern.h
alabel_str.o: alabel_str.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h her_metrics.h
arc.o: arc.c $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h extern.h
arcrel.o: arcrel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
box.o: box.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
boxrel.o: boxrel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
capmod.o: capmod.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
circle.o: circle.c $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h extern.h
circlerel.o: circlerel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
closepl.o: closepl.c $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h extern.h
color.o: color.c $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h extern.h
colordb.o: colordb.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
colordb2.o: colordb2.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
colorname.o: colorname.c $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h extern.h colorname.h
concat.o: concat.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
cont.o: cont.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
contrel.o: contrel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
controlify.o: controlify.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h control.h jis.h
dot.o: dot.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
ellarc.o: ellarc.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
ellipse.o: ellipse.c $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h extern.h
endpoly.o: endpoly.c $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h extern.h
erase.o: erase.c $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h extern.h
fakearc.o: fakearc.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h fakearc.h
fill.o: fill.c $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h extern.h
fillcolor.o: fillcolor.c $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h extern.h
flushpl.o: flushpl.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
fontdb.o: fontdb.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
fontname.o: fontname.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
fontsize.o: fontsize.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
header-OLD.o: header-OLD.c
header.o: header.c
her_glyphs.o: her_glyphs.c
intfont.o: intfont.c $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h extern.h
iso.o: iso.c $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h extern.h
joinmod.o: joinmod.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
label.o: label.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
labelwidth.o: labelwidth.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
line.o: line.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
linemod.o: linemod.c $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h extern.h
linerel.o: linerel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
linewidth.o: linewidth.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
marker.o: marker.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
markerrel.o: markerrel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
matrix.o: matrix.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
move.o: move.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
moverel.o: moverel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
openpl.o: openpl.c $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h extern.h
outbuf.o: outbuf.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
outfile.o: outfile.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
pencolor.o: pencolor.c $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h extern.h
point.o: point.c $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h extern.h
pointrel.o: pointrel.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
range.o: range.c $(top_srcdir)/include/sys-defines.h $(top_srcdir)/include/plot.h extern.h
restorestate.o: restorestate.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
savestate.o: savestate.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h defaultstate.h
space.o: space.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
textangle.o: textangle.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
vector.o: vector.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
xmalloc.o: xmalloc.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
xstring.o: xstring.c $(top_srcdir)/include/plot.h $(top_srcdir)/include/sys-defines.h extern.h
